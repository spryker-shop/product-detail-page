{% extends model('component') %}

{% set config = {
    name: 'variant',
    tag: 'div'
} | merge(config | default({})) %}

{% set data = {
    name: data.name,
    formName: data.formName,
    values: data.values,
    selectedValue: data.selectedValue | default(null),
    label: data.label | default(''),
    isAvailable: data.isAvailable | default(true)
} | merge(data | default({})) %}

{% block body %}
    <strong>{{data.label}} </strong>

    {% if data.selectedValue is null %}
        {% if data.isAvailable %}
            {% embed atom('select') with {
                modifiers: ['expand'],
                attributes: {
                    name: data.formName,
                    onchange: 'this.form.submit()'
                },
                embed: {
                    values: data.values
                }
            } only %}
                {% block options %}
                    <option>{{ 'product.attribute._none' | trans }}</option>
                    {% for value in embed.values %}
                        <option value="{{value}}">{{value}}</option>
                    {% endfor %}
                {% endblock %}
            {% endembed %}
        {% else %}
            {{ 'product.attribute.not_available' | trans }}
        {% endif %}
    {% else %}
        <br/>{{data.selectedValue}} <a href="?">{{ 'Reset' | trans }}</a>
    {% endif %}
{% endblock %}
